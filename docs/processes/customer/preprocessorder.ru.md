# customerbackend.preprocessorder

Доступно на других языках: [English/Английский](preprocessorder.md), [Russian/Русский](preprocessorder.ru.md). 

Бэкенд сервис приложения для потребителей: предварительная обработка заказа.

Описание бэкенд сервиса представлено по [данной ссылке](../../frontend/customerbackend.ru.md).

## Описание процесса

- Выполняется автоматически.
- Сервис получает запрос от клиента с параметрами заказа.
- В БД есть рецепт каждого продукта с указанием необходимых исходных продуктов и их количеством/весом/объемом.
- Из БД выгружаются рецепты, чтобы получить количество исходных продуктов, необходимых для выполнения заказа.
- В БД выполняется запрос на получение реального количества необходимых исходных продуктов на складе.
- Если **количества** на складе **не достаточно**, то асинхронно запускается процесс [Доставить из магазина на склад](../courier/store2wh.ru.md), и отправляется ответ на сервис, который вызвал данный процесс.
- Если **количества** на складе **достаточно**, то асинхронно запускается процесс [Доставить со склада на кухню](../warehouse/fromwhtokitchen.ru.md), и отправляется ответ на сервис, который вызвал данный процесс.

![customer.preprocessorder](../../img/activitydiagrams/customer.preprocessorder.png)
