# fileservice

[English](fileservice.md) | [Русский](fileservice.ru.md). 

`fileservice` — это бэкенд сервис, который управляет хранением и получением файлов в [приложении службы доставки](../../README.ru.md).

## Общая модель системы 

![system_overall](../img/system_overall.png)

## Описание сервиса

Функциональные возможности данного сервиса включают в себя:
- Загрузка файлов на сервер (изображения, видео, Word, Excel, PDF)
- Загрузка файлов с сервера (изображения, Word, Excel, PDF)
- Хранение файлов на сервере
- Получение файлов с сервера
- Проверка целостности файла
- Формирование QR-кода
- Обработка прав доступа к файлам и контроль доступа.

### Техническое описание сервиса

- Возможно сделать только один метод у сервиса (входные параметры: токен сессии, тип файла, значения для формирования файла; выходные параметры: токен сессии, uid сформированного файла, тип файла, тело файла в виде массива байт)
- uid сформированного файла нужен для того, чтобы сформированный файл можно было закэшировать и легко его находить в БД 
- Сохраняет сформированный файл
- С точки зрения данного сервиса нет разницы, загружаются ли файлы на сервер или с него
- Необходимо предусмотреть в системе возможность сохранения файлов на отдельном выделенном сервере и периодической очистки файловой системы от созданных файлов: поскольку система обрабатывает большое количество запросов, то файлов также создается много, соответственно, существует риск столкнуться с проблемой нехватки места на жёстком диске.

<!--
### Расчеты

- Разрешение: 720p
- Размер (в пикселях): 1280x720
- Количество пикселей: 921 600
- Количество кадров в секунду: 24 кадра в секунду
     - Изображение обновляется каждые 41,5 мс (или 0,041 с)
- Передаваемые данные в секунду: 22 118 400 байт (около 22 МБ)
-->

### Возможные ограничения

- Размер файлов
- Разрешение изображения
- Файлы могут передаваться во время потоковой передачи

<!--
Разрешение видео:

![video-resolution](https://zidivo.com/wp-content/uploads/2020/09/video-resolution.png)
-->

## Процессы 

- [Сгенерировать QR код](../processes/fileservice/generateqr.md)
- [Просмотр видео](../processes/fileservice/watchingvideos.ru.md)
